(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{DT07:function(e,t,n){e.exports=n.p+"static/x-md.c8b2241a.png"},"F/wz":function(e,t,n){e.exports=n.p+"static/y-lg.ea6fc5d3.png"},FWJK:function(e,t,n){e.exports=n.p+"static/x-lg.16657d5b.png"},Puaj:function(e,t){},Vgm3:function(e,t,n){e.exports=n.p+"static/a-md.b4911aee.png"},igIN:function(e,t,n){e.exports=n.p+"static/y-md.ea59dfd7.png"},kiTE:function(e,t,n){e.exports=n.p+"static/a-lg.70618029.png"},lAKz:function(e,t,n){e.exports={btnPrimary:"btnPrimary___2M4Gv"}},rnuH:function(e,t,n){"use strict";n.r(t);var c=n("tJVT"),a=n("q1tI"),r=n.n(a),o=n("zoEq"),s=(n("sWDv"),"eco-image-viewer"),i=e=>{var t=Object(a["useRef"])(),n=e.src,o=e.site,i=e.index,l=e.transInfo,u=e.scaleRate,d=e.isChange,m=e.innerInfo,h=Object(a["useState"])({width:1,height:1}),p=Object(c["a"])(h,2),x=p[0],g=p[1],w=m.width/m.height,f=x.width/x.height,b=Object(a["useMemo"])((()=>f>w?{width:Math.min(x.width,m.width)}:{height:Math.min(x.height,m.height)}),[f,w,m,x]);return Object(a["useEffect"])((()=>{var e=new Image;e.onload=()=>{g({width:e.width,height:e.height})},e.src=n}),[]),r.a.createElement("div",{className:"".concat(s,"-image-slide ").concat(d?"".concat(s,"-slide-trans"):""),style:Object.assign({},{transform:"translate(calc(".concat(-100*(i-o),"% + ").concat(1===u||i===o?l.x:0,"px), ").concat(i===o?l.y:0,"px)"),"-webkit-transform":"translate(calc(".concat(-100*(i-o),"% + ").concat(1===u||i===o?l.x:0,"px), ").concat(i===o?l.y:0,"px)"),"-ms-transform":"translate(calc(".concat(-100*(i-o),"% + ").concat(1===u||i===o?l.x:0,"px), ").concat(i===o?l.y:0,"px)"),"-moz-transform":"translate(calc(".concat(-100*(i-o),"% + ").concat(1===u||i===o?l.x:0,"px), ").concat(i===o?l.y:0,"px)"),"-o-transform":"translate(calc(".concat(-100*(i-o),"% + ").concat(1===u||i===o?l.x:0,"px), ").concat(i===o?l.y:0,"px)")})},r.a.createElement("img",{src:n,className:"".concat(s,"-image-item"),style:Object.assign({},b,{transform:"translate(-50%, -50%) scale(".concat(i===o?u:1),"-webkit-transform":"translate(-50%, -50%) scale(".concat(i===o?u:1),"-ms-transform":"translate(-50%, -50%) scale(".concat(i===o?u:1),"-moz-transform":"translate(-50%, -50%) scale(".concat(i===o?u:1),"-o-transform":"translate(-50%, -50%) scale(".concat(i===o?u:1)}),ref:t}))},l=()=>{};var u="eco-image-viewer",d=e=>{var t=Object(a["useRef"])(),n=Object(a["useRef"])(1),s=Object(a["useRef"])({x:0,y:0}),d=Object(a["useRef"])({x:0,y:0}),m=Object(a["useRef"])(),h=e.onClose,p=void 0===h?l:h,x=e.index,g=void 0===x?0:x,w=e.urls,f=void 0===w?[]:w,b=Object(a["useState"])(g),y=Object(c["a"])(b,2),v=y[0],E=y[1],j=Object(a["useState"])({x:0,y:0}),O=Object(c["a"])(j,2),M=O[0],T=O[1],N=Object(a["useState"])(1),z=Object(c["a"])(N,2),I=z[0],S=z[1],D=Object(a["useState"])(!1),k=Object(c["a"])(D,2),R=k[0],W=k[1],F=Object(a["useState"])(!1),C=Object(c["a"])(F,2),J=C[0],K=C[1],L=Object(a["useState"])({width:1,height:1}),P=Object(c["a"])(L,2),X=P[0],A=P[1];Object(a["useEffect"])((()=>(document.body.classList.add("fixed-body"),()=>{document.body.classList.remove("fixed-body")})),[]);var H=()=>{W(!0),setTimeout((()=>{W(!1)}),200)};Object(a["useEffect"])((()=>{d.current={x:0,y:0},T({x:0,y:0}),s.current={x:0,y:0},S(1),n.current=1;var e=new o["a"](t.current);return e.on("tap",(e=>{var t=e.target;if(!/point|tools/.test(t.className))return m.current?(clearTimeout(m.current),m.current=null,void(1===n.current?(n.current=2,S(2)):(S(1),d.current={x:0,y:0},T({x:0,y:0}),s.current={x:0,y:0},n.current=1))):void(m.current=setTimeout((()=>{p()}),200))})),e.on("swipe",(e=>{"left"===e.direction&&v<f.length-1&&(E(v+1),H()),"right"===e.direction&&v>0&&(E(v-1),H())})),e.on("panmove",(e=>{var t=e.displacementX,n=e.displacementY,c=parseInt((d.current.x+t).toFixed(0)),a=parseInt((d.current.y+n).toFixed(0)),r={x:c,y:a};T(r),s.current=r})),e.on("panend",(e=>{var t;null===d||void 0===d||null===(t=d.current)||void 0===t||t.x;1!==n.current&&(d.current={x:d.current.x+e.displacementX,y:d.current.y+e.displacementY}),setTimeout((()=>{T({x:1===n.current?0:s.current.x,y:1===n.current?0:s.current.y})}),100),Math.abs(e.displacementX)/window.innerWidth>1/3&&1===n.current&&(e.displacementX<=0?v<f.length-1&&(E(v+1),H()):v>0&&(E(v-1),H())),1===n.current&&(d.current={x:0,y:0},T({x:0,y:0}),s.current={x:0,y:0})})),e.on("pinchmove",(e=>{console.log("pinch",e.deltaScale),e.scale>1?n.current=Math.min(Math.round(n.current*e.deltaScale*100)/100,4):n.current=Math.max(Math.round(n.current*e.deltaScale*100)/100,.5),S(n.current)})),()=>{e.destroy()}}),[v]),Object(a["useEffect"])((()=>(A({width:window.innerWidth,height:window.innerHeight}),K(window.innerWidth>420),window.addEventListener("resize",(()=>{A({width:window.innerWidth,height:window.innerHeight}),K(window.innerWidth>420)})),()=>{window.removeEventListener("resize",(()=>{}))})),[]);var V=()=>{console.log("zoomIn",n.current),n.current<4&&(n.current=Math.min(2*n.current,4),S(n.current))},_=()=>{console.log("zoomOut",n.current),n.current>.5&&(n.current=Math.max(.8*n.current,.5),S(n.current))},q=()=>{console.log("zoomReset",n.current),1!==n.current&&(n.current=1,S(1),d.current={x:0,y:0},T({x:0,y:0}),s.current={x:0,y:0})},Y=()=>{v>0&&(E((e=>e-1)),H())},G=()=>{v<f.length-1&&(E((e=>e+1)),H())};return r.a.createElement("div",{className:"".concat(u,"-image-root"),ref:t},f.map(((e,t)=>r.a.createElement(i,{key:t,src:e,index:v,site:t,transInfo:M,scaleRate:I,isChange:R,innerInfo:X}))),f.length>1&&r.a.createElement("div",{className:"".concat(u,"-point-box")},new Array(f.length).fill(0).map(((e,t)=>r.a.createElement("span",{key:t,className:"".concat(u,"-point ").concat(v===t?"".concat(u,"-point-on"):""),onMouseDown:()=>{console.log("point mouse",t),E(t),H()},onTouchEnd:()=>{console.log("point Touch",t),E(t),H()}})))),J&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(u,"-image-tools")},r.a.createElement("span",{className:"".concat(u,"-tools-btn ").concat(u,"-tools-reduce"),onMouseDown:_,onTouchEnd:_}),r.a.createElement("span",{className:"".concat(u,"-tools-btn ").concat(u,"-tools-add"),onMouseDown:V,onTouchEnd:V}),r.a.createElement("div",{className:"".concat(u,"-tools-reset"),onMouseDown:q,onTouchEnd:q},"\u91cd\u7f6e")),r.a.createElement("div",{className:"".concat(u,"-tools-arrow ").concat(u,"-tools-left"),onMouseDown:Y,onTouchEnd:Y}),r.a.createElement("div",{className:"".concat(u,"-tools-arrow ").concat(u,"-tools-right"),onMouseDown:G,onTouchEnd:G})))},m=d,h=n("lAKz"),p=n.n(h),x=n("kiTE"),g=n.n(x),w=n("Vgm3"),f=n.n(w),b=n("FWJK"),y=n.n(b),v=n("DT07"),E=n.n(v),j=n("F/wz"),O=n.n(j),M=n("igIN"),T=n.n(M);t["default"]=()=>{var e=Object(a["useState"])(!1),t=Object(c["a"])(e,2),n=t[0],o=t[1],s=()=>o((e=>!e));return r.a.createElement("div",null,r.a.createElement("div",{className:p.a.btnPrimary,onClick:s},"\u9884\u89c8"),n&&r.a.createElement(m,{urls:[g.a,f.a,y.a,E.a,O.a,T.a],onClose:s}))}},sWDv:function(e,t,n){}}]);